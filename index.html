<!DOCTYPE html>
<html>
<head>
    <title>Canvas Example</title>
</head>
<body>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script>
        const draw_command_defaults = {
            center: [0, 0],
            dimensions: [5, 5],
            rotation: 0,
            color: "black",
            units: "px",
            blend_mode: "source-over",
        }

        function draw_command(props) {
            const props = {...draw_command_defaults, ...props};
            if(props.units === "%") {
                props.center[0] /= 100 * canvas.width;
                props.center[1] /= 100 * canvas.height;
                props.dimensions = props.dimensions.map((coord) => {
                    return coord / 100 * canvas.width;
                });
            }
        }

        function draw_triangle(ctx, props) {
            let center = props.center || [0, 0];
            let dimensions = props.dimensions || [5, 5];
            let rotation = props.rotation || 0;
            let color = props.color || "black";

            ctx.globalCompositeOperation = "xor";

            let tri_points = [
                [center[0], center[1] - dimensions[1] / 2],
                [center[0] + dimensions[0] / 2, center[1] + dimensions[1] / 2],
                [center[0] - dimensions[0] / 2, center[1] + dimensions[1] / 2]
            ];

            if(rotation) {
                tri_points = tri_points.map((point) => {
                    let x = point[0] - center[0];
                    let y = point[1] - center[1];
                    let newX = x * Math.cos(rotation) - y * Math.sin(rotation);
                    let newY = x * Math.sin(rotation) + y * Math.cos(rotation);
                    return [newX + center[0], newY + center[1]];
                });
            }

            ctx.fillStyle = color;

            ctx.beginPath();
            ctx.moveTo(tri_points[0][0], tri_points[0][1]);
            ctx.lineTo(tri_points[1][0], tri_points[1][1]);
            ctx.lineTo(tri_points[2][0], tri_points[2][1]);
            ctx.fill();
        }

        // Get the canvas element
        var canvas = document.getElementById("myCanvas");

        // Get the 2D rendering context
        var ctx = canvas.getContext("2d");

        // Your code for drawing on the canvas goes here
        draw_triangle(ctx, {
            center: [250, 250],
            dimensions: [100, 100],
            rotation: Math.PI / 4,
            color: "red"
        });

        draw_triangle(ctx, {
            center: [300, 250],
            dimensions: [100, 100],
            rotation: Math.PI / 4,
            color: "blue"
        });
    </script>

    <style>
        body {
            background: black;
        }
        
        canvas {
            width: 100%;
            background: transparent;
        }
    </style>
</body>
</html>
